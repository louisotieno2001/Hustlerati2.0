<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= product.name %> | Hustlerati</title>
    <meta name="description" content="<%= product.description %>">
    <meta name="keywords" content="product, <%= product.category %>, <%= product.subcategory %>, Hustlerati">
    <meta name="author" content="Hustlerati Team">
    <link rel="icon" href="/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="/stylesheets/default.css">
    <link rel="stylesheet" href="/stylesheets/product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>Hustlerati</h1>
                <p>Commercial Spaces for Every Business</p>
            </div>
            <nav>
                <ul>
                    <li><a href="/" class="active">Home</a></li>
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="/real_estate">Find Space</a></li>
                    <li><a href="/shop">Shop</a></li>
                    <li><a href="/solutions">Solutions</a></li>
                    <li class="dropdown">
                        <a href="#">Business Size <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Small Business</a></li>
                            <li><a href="#">Medium Business</a></li>
                            <li><a href="#">Large Enterprises</a></li>
                            <li><a href="#">Startups</a></li>
                        </ul>
                    </li>
                    <li><a href="/resources">Resources</a></li>
                </ul>

                <!-- Mobile Menu Items -->
                <div class="mobile-menu-items">
                    <div class="auth-buttons mobile">
                        <a href="/login"><button class="btn btn-outline">Login</button></a>
                        <a href="/signup"><button class="btn btn-primary">Sign Up</button></a>
                    </div>
                    <div class="theme-switcher mobile">
                        <button class="theme-toggle-btn">
                            <i class="fas fa-palette"></i> Themes
                        </button>
                        <div class="theme-dropdown">
                            <button class="theme-option" data-theme="light">
                                <i class="fas fa-sun"></i> Light
                            </button>
                            <button class="theme-option" data-theme="dark">
                                <i class="fas fa-moon"></i> Dark
                            </button>
                            <button class="theme-option" data-theme="elegant">
                                <i class="fas fa-gem"></i> Elegant
                            </button>
                            <button class="theme-option" data-theme="minimal">
                                <i class="fas fa-pencil-ruler"></i> Minimal
                            </button>
                            <button class="theme-option" data-theme="professional">
                                <i class="fas fa-briefcase"></i> Professional
                            </button>
                            <button class="theme-option" data-theme="industrial">
                                <i class="fas fa-warehouse"></i> Industrial
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="header-actions">
                <div class="theme-switcher">
                    <button class="theme-toggle-btn">
                        <i class="fas fa-palette"></i> Themes
                    </button>
                    <div class="theme-dropdown">
                        <button class="theme-option" data-theme="light">
                            <i class="fas fa-sun"></i> Light
                        </button>
                        <button class="theme-option" data-theme="dark">
                            <i class="fas fa-moon"></i> Dark
                        </button>
                        <button class="theme-option" data-theme="elegant">
                            <i class="fas fa-gem"></i> Elegant
                        </button>
                        <button class="theme-option" data-theme="minimal">
                            <i class="fas fa-pencil-ruler"></i> Minimal
                        </button>
                        <button class="theme-option" data-theme="industrial">
                            <i class="fas fa-warehouse"></i> Industrial
                        </button>
                        <button class="theme-option" data-theme="professional">
                            <i class="fas fa-briefcase"></i> Professional
                        </button>
                    </div>
                </div>
                <div class="auth-buttons">
                    <a href="/login"><button class="btn btn-outline">Login</button></a>
                    <a href="/signup"><button class="btn btn-primary">Sign Up</button></a>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="product-main">
        <div class="container">
            <div class="product-details">
                <div class="product-gallery">
                    <div class="image-scroll-container">
                        <% if (product.media && product.media.length > 0) { %>
                            <% product.media.forEach(function(media) { %>
                                <% const mediaUrl = media.url || `/assets/${media.id}`; %>
                                <% const filename = media.filename_download || media.filename_disk || ''; %>
                                <% if (filename.endsWith('.mp4') || filename.endsWith('.webm') || filename.endsWith('.ogg') || filename.endsWith('.mov')) { %>
                                    <video class="product-media" controls preload="metadata">
                                        <source src="<%= mediaUrl %>" type="video/mp4">
                                        <source src="<%= mediaUrl %>" type="video/webm">
                                        <source src="<%= mediaUrl %>" type="video/ogg">
                                        Your browser does not support the video tag.
                                    </video>
                                <% } else if (filename.endsWith('.jpg') || filename.endsWith('.jpeg') || filename.endsWith('.png') || filename.endsWith('.gif') || filename.endsWith('.webp')) { %>
                                    <img class="product-media" src="<%= mediaUrl %>" alt="<%= product.name %>" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                                    <div class="media-fallback" style="display:none;">
                                        <i class="fas fa-image"></i>
                                        <span>Image Preview Unavailable</span>
                                    </div>
                                <% } else { %>
                                    <div class="media-fallback">
                                        <i class="fas fa-file-alt"></i>
                                        <span>Media Preview</span>
                                    </div>
                                <% } %>
                            <% }); %>
                        <% } else { %>
                            <div class="media-fallback">
                                <i class="fas fa-shopping-bag"></i>
                                <span>Product Item</span>
                            </div>
                        <% } %>
                    </div>
                </div>
                <div class="product-info">
                    <h1><%= product.name %></h1>
                    <div class="product-price">$<%= product.price %></div>
                    <div class="product-description">
                        <p><%- product.description %></p>
                    </div>
                    <% if (product.category) { %>
                        <div class="product-category">
                            <strong>Category:</strong> <%= product.category %>
                        </div>
                    <% } %>
                    <% if (product.subcategory) { %>
                        <div class="product-subcategory">
                            <strong>Subcategory:</strong> <%= product.subcategory %>
                        </div>
                    <% } %>
                    <div class="product-actions">
                        <button class="btn btn-primary add-to-cart" data-id="<%= product.id %>">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <a href="/cart" class="btn btn-outline">
                            <i class="fas fa-shopping-cart"></i> Go to Cart
                        </a>
                        <a href="/shop" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Back to Shop
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <%- include('partials/footer') %>

    <script>
        window.user = <%- typeof user !== 'undefined' ? JSON.stringify(user) : 'null' %>;
    </script>
    <script src="/javascript/accessibility.js"></script>
    <script src="/javascript/index.js"></script>
    <script src="/javascript/cart.js"></script>
    <script src="/javascript/product.js"></script>
</body>

</html>
